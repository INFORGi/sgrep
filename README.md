# sgrep

**sgrep** — это простая реализация утилиты `grep` для Windows на C++20.  
Позволяет искать строки в файлах и папках с поддержкой масок и нескольких опций.  

---

## Сборка

Необходимы:
- CMake 3.20+
- Компилятор MSVC / Clang / MinGW с поддержкой C++20

```powershell
cmake -S . -B build
cmake --build build --config Release
````

После сборки исполняемый файл будет находиться в `build/Release/sgrep.exe`
(или в `Debug` при отладочной сборке).

---

## Использование

Общий синтаксис:

```powershell
sgrep [опции] "строка" <пути или маски>
```

Примеры:

```powershell
# Поиск "main" в *.cpp (без рекурсии)
sgrep -i -n "main" *.cpp

# Поиск "error" рекурсивно во всех txt-файлах в каталоге logs
sgrep -d -i "error" "C:\Projects\logs\*.txt"

# Поиск "main" одновременно в файлах и папках
sgrep "main" "C:\Projects\logs\*.txt" "C:\Projects\logs" *.cpp *.h

# Просто вывести список найденных файлов (если строка = " ")
sgrep " " *.cpp *.h
```

---

## Опции

| Опция | Описание                       |
| ----- | ------------------------------ |
| `-d`  | Рекурсивный поиск по подпапкам |
| `-i`  | Игнорировать регистр символов  |
| `-n`  | Показать номера строк в выводе |

---

## Поддержка масок

* Можно указывать маски файлов (`*.cpp`, `*.h`).
* Маски могут быть как глобальными, так и относительными к пути:

  * `*.cpp` — искать во всех `.cpp` в текущей папке (и в подкаталогах при -d)
  * `C:\Logs\*.txt` — искать во всех `.txt` в папке `C:\Logs`

---

## Особенности

* Работает только в Windows (использует WinAPI и `LCMapStringEx` для корректной работы с кириллицей).
* Аргументы в PowerShell с масками или пробелами нужно брать в кавычки:

  ```powershell
  & ".\sgrep.exe" -i -n "main" "*.cpp"
  ```
* При передаче строки `" "` (пробел) утилита выводит список найденных файлов, без поиска текста.
